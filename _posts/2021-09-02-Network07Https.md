---
title: 『그림으로 배우는 Http&Network Basic』 - 7. 웹을 안전하게 지켜주는 HTTPS
author: Banny
date: 2021-09-02 11:05:00 +0900
categories: [Network]
tags: [Network]
---

## HTTP의 약점

<strong>평문이기 때문에 도청 가능</strong>

TCP/IP의 구조의 통신 내용은 전부 통신 경로의 도중에 엿볼 수 있습니다. 통신 경로 상에 있는 네트워크 기기나 케이블 등이 모두 자신의 것일 수 없기 때문입니다.

네트워크 상을 흐르고 있는 패킷을 수집하는 것만으로 도철할 수 있습니다. 대표적인 패킷 캡처인 Wireshark라는 툴을 이용해 패킷을 해석할 수 있습니다.

<center>
<img alt="http status code2" src="https://user-images.githubusercontent.com/62047302/131617159-0545e569-eb30-4905-ab76-c8dbdb809093.png">
</center>

<br>

이러한 도청으로부터 정보를 지키기 위헤서 연구되느 방법들이 있는데, 그 중 가장 보급되어 있는 기술은 암호화입니다.

- 통신 암호화: 통신을 암호화하는 방법입니다. SSL(Secure Socket Layer)이나 TSL(Transport Layer Security)이라는 다른 프로토콜을 조합함으로써 HTTP의 통신 내용을 암호화할 수 있습니다.
  SSL 등을 이용해 안전한 통신로를 확립하고 나서 그 통신로를 사용해 HTTP 통신을 합니다. 이러한 통신을 HTTPS(HTTP Secure)라고 부릅니다.

- 콘텐츠 암호화: 통신은 그래도 둔 채로 HTTP 메시지에 포함되는 콘텐츠만 암호화하는 방법입니다. 이 경우 클라이언트에서 HTTP 메시지를 암호화해서 출력하는 처리가 필요합니다.

<br>

<strong>통신 상대를 확인하지 않기 때문에 위장이 가능</strong>

HTTP에 의한 통신에는 상대가 누구인지 확인하는 처리가 없기 때문에 누구든지 리퀘스트를 보낼 수 있습니다. 다음과 같은 약점을 지닙니다.

- 리퀘스트를 보낸 곳의 웨 서버가 원래 의도한 리스폰스를 보내야 하는 웹 서버인지 아닌지를 확인할 수 없다.
- 리스폰스를 반환한 곳의 클라이언트가 원래 의도한 리퀘스트를 보낸 클라이언트인지 아닌지를 확인할 수 없다.
- 통신하고 있는 상대가 접근이 허가된 상대인지 아닌지를 확인할 수 없다.
- 어디의 누가 리퀘스트를 했는지를 확인할 수 없다.
- 의미없는 리퀘스트라도 수신하게 된다. 대량의 리퀘스트에 의한 DoS 공격을 방지할 수 없다.

이러한 문제 때문에 상대를 확인하기 위해 SSL을 사용합니다. SSL은 암호화뿐만 아니라 상대를 확인하는 수단으로 증명서를 제공합니다.

증명서는 신뢰할 수 있는 제3자 기관에 의해 발행되기 때문에 서버나 클라이언트가 실재하는 사실을 증명합니다. 이 증명서를 이용함으로써 통신 상대가 내가 통신하고자 하는 서버임을 나타내고 이용자는 개인 정보 누설 등의 위험성이 줄어들게 됩니다.

<br>

<strong>완전성을 증명할 수 없기 때문에 변조가 가능</strong>

정보의 정확성을 말합니다. 그 뜻은, 만약 리퀘스트나 리스폰스가 발신된 후에 상대가 수신할 때까지의 사이에 변조되었다 하더라도 이 사실을 알 수 없다는 뜻입니다. 즉, 발신한 리퀘스트나 리스폰스와 수신한 리퀘스트나 리스폰스가 같은지 아닌지를 확인할 수 없습니다. 중간자 공격(Man-in-the-Middle)에 취약한 것이지요.

<br>

## HTTP + 암호화 + 인증 + 완전성 보호 = HTTPS

<center>
<img alt="http status code2" src="https://user-images.githubusercontent.com/62047302/131618962-4382b7ca-b7d4-41b9-8bc8-5aaac88b1c7c.png">
</center>

<br>

HTTPS는 새로운 애플리케이션 계층의 프로토콜은 아닙니다. HTTP 통신을 하는 소켓 부분을 SSL이나 TLS라는 프로토콜로 대체하고 있을 뿐입니다. 보통 HTTP는 직접 TCP와 통신하지만, SSL을 사용한다면 SSL이 TCP와 통신하게 됩니다. SSL을 사용함으로써 HTTP는 암호화와 증명서와 완전성 보호를 지킬 수 있게 됩니다.

<br>

<strong>상호간 키를 교환하는 공개키 암호화 방식</strong>

응답 메시지를 암호화해서 클라이언트에 키와 같이 보내준다고 했을 때, 도청으로 인해 누군가가 키를 갖게 될 것입니다. 애초에 키를 안전하게 보낼 수 있다면 데이터도 안전하게 보낼 수 있을 것입니다.

이런 문제를 해결하기 위해 공개키 암호화 방식이 채택되었습니다.

공개키 암호를 사용한 암호화는 암호를 보내는 측이 상대의 공개키를 사용해 암호화를 합니다. 그리고 암호화된 정보를 받아들인 상대는 자신의 비밀키를 사용해 복호화를 실시합니다. 이 방식은 암호를 푸는 비밀키를 통신으로 보낼 필요가 없기 때문에 도청의 의해서 키를 빼앗길 걱정은 없습니다.

<br>

## SSL은 느리다?

TCP 접속과 HTTP 리퀘스트/리스폰스 이외에 SSL에 필요한 통신이 추가되기 때문에 정체 통신량이 증가합니다.
또한 SSL은 암호화 처리를 하고 있기 때문에 서버나 클라이언트에서는 암호화와 복호화를 위한 계산을 해야 합니다. 리소스를 소비하게 되어 느려집니다. 이런 문제를 해결하기 위해 SSL 엑셀러레이터라는 하드웨어를 사용해서 부하를 분산하여 몇 배 빠른 통신을 하게 합니다.

<br>
<br>
참고자료<br>
- <a href="http://www.yes24.com/Product/Goods/15894097">『그림으로 배우는 Http&Network Basic』 - 우에노 센</a>
